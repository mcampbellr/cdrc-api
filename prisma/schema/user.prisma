enum AccountType {
  doctor
  assistant
  patient
}

enum RoleType {
  admin
  user
}

model User {
  id                   String      @id @default(uuid())
  name                 String
  username             String      @unique
  role                 RoleType    @default(user)
  accountType          AccountType @default(patient)
  email                String      @unique
  password             String?
  avatar               String?
  googleId             String?     @unique
  appleId              String?     @unique
  invitedBy            String?     @db.Uuid
  invitationCode       String?
  defaultBranchId      String?     @db.Uuid
  lastLoginAt          DateTime?
  tokenVersion         Int         @default(0)
  createdAt            DateTime    @default(now())
  updatedAt            DateTime    @updatedAt
  calendarRefreshToken String?

  doctorBranches           DoctorBranch[]
  doctorTreatments         DoctorTreatment[]
  schedules                Schedule[]
  uploadedPhotos           TreatmentPhoto[]           @relation("UploadedBy")
  comments                 Comment[]                  @relation("CommentCreatedBy")
  notifications            Notification[]
  doctorBranchAvailability DoctorBranchAvailability[]

  @@map("users")
}
